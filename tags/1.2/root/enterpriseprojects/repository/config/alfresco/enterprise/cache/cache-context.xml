<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>
 

<beans>   
   <!-- =========================== -->
   <!-- Authority BridgeTable cache -->
   <!-- ============================ -->

   <bean name="asynchronouslyRefreshedCacheMessageBroker" class="org.alfresco.enterprise.repo.cache.AsynchronouslyRefreshedCacheMessageBroker" >
      <property name="registry">
         <ref bean="asynchronouslyRefreshedCacheRegistry" />
      </property>
      <property name="messengerFactory" ref="messengerFactory"/>
   </bean>

   <!--
      Factory responsible for creating caches - this overrides the community version to provide
      clustered caches when clustering is enabled.
   -->
   <bean id="cacheFactory" class="org.alfresco.enterprise.repo.cluster.cache.ClusterAwareCacheFactory">
      <property name="hazelcastInstanceFactory" ref="hazelcastInstanceFactory"/>
      <property name="nonClusteredCacheFactory">
         <bean class="org.alfresco.repo.cache.DefaultCacheFactory">
            <property name="properties" ref="global-properties"/>
         </bean>
      </property>
      <property name="messengerFactory" ref="messengerFactory"/>
      <property name="properties" ref="global-properties"/>
   </bean>

   <bean id="hibernateCacheProvider" class="org.alfresco.enterprise.repo.cache.HibernateCacheProvider">
      <property name="clusteredCacheFactory" ref="cacheFactory"/>
   </bean>
</beans>

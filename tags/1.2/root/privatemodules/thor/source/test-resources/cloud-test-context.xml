<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
    
   <import resource="classpath:alfresco/enterprise-web-scripts-application-context.xml" />

   <bean id="webscripts.test" class="org.alfresco.module.org_alfresco_module_cloud.webscripts.TenantTestWebScriptRepoServer">
      <property name="container" ref="webscripts.container" />
      <property name="authenticationService" ref="authenticationService" />
      <property name="configService" ref="web.config" />
      <property name="transactionHelper" ref="retryingTransactionHelper" />
      <property name="messages">
         <bean class="org.springframework.context.support.ResourceBundleMessageSource">
            <property name="basenames">
               <list>
                  <value>webscripts/messages/webscripts</value>
               </list>
            </property>
         </bean>
      </property>
   </bean>

    <!-- Override the default emailHelper -->
    <bean id="cloudEmailHelper" class="org.alfresco.module.org_alfresco_module_cloud.util.EmailHelper">
        <property name="actionService" ref="ActionService"/>
        <property name="emailTestStorage" ref="emailTestStorage"/>
    </bean>
    
    <!-- Emails will be stored within this object for later validation -->
    <bean id="emailTestStorage" class="org.alfresco.module.org_alfresco_module_cloud.util.EmailHelper$EmailTestStorage"/>
</beans>
